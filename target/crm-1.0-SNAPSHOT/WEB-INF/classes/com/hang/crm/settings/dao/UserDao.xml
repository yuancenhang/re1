<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hang.crm.settings.dao.UserDao">
    <select id="login" resultType="User">
        select * from t_user where loginAct = #{loginAct}
    </select>

    <!--当某个字段名和实体类属性名不一样时，可以用 as 起别名
    <select id="selectByIdAsChinese" parameterType="java.lang.String" resultType="Student">
        select name as 'Fname' from t_student where id = #{id}
    </select>
    -->

    <!--这个标签能定义字段和实体类属性名的对应关系,当字段和实体类 出现大量不同 时可以用
    id，这个标签的标识
    type，对应的实体类-->
    <!--<resultMap id="stu2" type="Student2">
        &lt;!&ndash;主键字段用id,其他字段用result
        property，实体类属性名
        column，字段名&ndash;&gt;
        <id property="no" column="id"/>
        <result property="boyName" column="name"/>
        <result property="boyAge" column="age"/>
        <result property="favorite" column="aihao"/>
    </resultMap>

    <select id="selectAll2" resultMap="stu2">
        &lt;!&ndash;模糊查询&ndash;&gt;
        select * from t_student where name like '%' #{name} '%'
    </select>-->

    <select id="selectAll" resultType="User">
        select * from t_student
    </select>

    <insert id="insert" >
        insert into t_student (id,name,age,aihao) values (#{id},#{name},#{age},#{aihao})
    </insert>

    <!--动态sql
    有if成立才会执行where
    if成立才会执行if里面的语句
    mybatis会屏蔽第一个连接符，and或or，所以第一个if里面也写了and-->
    <select id="selectDongTai" resultType="User">
        select * from t_student
        <where>
            <if test="id!=null and id!=''">
                and id=#{id}
            </if>
            <if test="name!=null and name!=''">
                and name=#{name}
            </if>
            <if test="age!=null and age!=''">
                and age=#{age}
            </if>
            <if test="aihao!=null and aihao!=''">
                and aihao=#{aihao}
            </if>
        </where>
    </select>

    <select id="selectByArray" resultType="User">

        <include refid="s0"/>
        <!--select * from t_student where id in-->

        <foreach collection="array" item="c" open="(" close=")" separator=",">
            #{c}
        </foreach>
    </select>

    <!--sql片段
    把大量相同的sql语句放进来，可以避免代码大量重复-->
    <sql id="s0">
        select * from t_student
    </sql>

</mapper>

























